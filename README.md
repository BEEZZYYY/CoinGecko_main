 # Crypto Portfolio Tracker

**Crypto Portfolio Tracker** — это веб-приложение для отслеживания криптовалютного портфеля. Приложение позволяет:

- Добавлять криптовалюты в портфель с указанием количества и цены покупки.
- Получать актуальные цены криптовалют в реальном времени через API CoinGecko.
- Просматривать историю транзакций и рассчитывать прибыль/убыток.
- Строить интерактивные графики изменения цен с помощью Plotly.js.
- Устанавливать пороговые значения и получать уведомления через Telegram при достижении заданных условий.

## Функциональные возможности

- **Портфель криптовалют:** Отображение списка активов с их символами, количеством, ценой покупки и текущей ценой.
- **Добавление активов:** Форма для ввода данных о криптовалюте.
- **Уведомления:** Возможность установки пороговых значений для уведомлений. При достижении порога приложение отправляет сообщение через Telegram.
- **Графики:** Построение интерактивных графиков изменения цен криптовалют.
- **Фоновый планировщик:** APScheduler запускает периодические проверки цен и уведомлений.

## Технологии

- **Backend:** Flask, Python
- **База данных:** SQLite с использованием SQLAlchemy
- **API:** [CoinGecko API](https://www.coingecko.com/en/api)
- **Уведомления:** Telegram Bot API (через библиотеку `python-telegram-bot`)
- **Визуализация:** Plotly.js
- **Frontend:** HTML, CSS, JavaScript, Bootstrap 5

## Структура проекта

```
crypto_portfolio_tracker/
├── app.py                # Точка входа приложения
├── config.py             # Конфигурационные параметры (ключи, токены, настройки БД)
├── requirements.txt      # Список зависимостей
├── models.py             # Модели базы данных (SQLAlchemy)
├── routes/               
│   ├── __init__.py       
│   ├── portfolio.py      # Маршруты для работы с портфелем и пользовательскими операциями
│   └── api.py            # Маршруты для работы с внешним API (CoinGecko)
├── templates/            # HTML-шаблоны (Jinja2)
│   ├── base.html         
│   ├── portfolio.html    
│   ├── add_asset.html    
│   ├── set_alert.html    
│   └── chart.html        
├── static/               # Статические файлы (CSS, JS)
│   ├── css/
│   │   └── styles.css
│   └── js/
│       └── scripts.js
└── scheduler.py          # Фоновые задачи (APScheduler)
```

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-username/crypto_portfolio_tracker.git
cd crypto_portfolio_tracker
```

### 2. Создание и активация виртуального окружения

Для Linux/Mac:

```bash
python3 -m venv venv
source venv/bin/activate
```

Для Windows:

```bash
python -m venv venv
venv\Scripts\activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Конфигурация

Отредактируйте файл `config.py` или задайте переменные окружения:

- **SECRET_KEY:** Случайно сгенерированная строка для безопасности сессий (можно сгенерировать командой `os.urandom(24)`).
- **SQLALCHEMY_DATABASE_URI:** Строка подключения к базе данных (по умолчанию используется SQLite: `sqlite:///crypto_portfolio.db`).
- **COINGECKO_API_URL:** URL публичного API CoinGecko (`https://api.coingecko.com/api/v3`).
- **TELEGRAM_TOKEN:** Токен Telegram-бота, полученный через [BotFather](https://t.me/BotFather).
- **TELEGRAM_CHAT_ID:** Идентификатор чата (или группы) в Telegram для отправки уведомлений.

### 5. Запуск приложения

Запустите приложение командой:

```bash
python app.py
```

Приложение будет доступно по адресу [http://127.0.0.1:5000](http://127.0.0.1:5000).

## Использование

- **Главная страница:** Отображает список криптовалют в портфеле с актуальными ценами.
- **Добавление актива:** Перейдите по ссылке «Добавить актив» в навигационной панели и заполните форму.
- **Установка уведомлений:** На странице портфеля выберите актив и перейдите к установке уведомления.
- **Просмотр графиков:** Нажмите кнопку «График» для отображения интерактивного графика изменения цены.

## Фоновые задачи

В файле `scheduler.py` настроен APScheduler, который каждые 5 минут проверяет актуальные цены криптовалют и сравнивает их с заданными пороговыми значениями. При достижении порога отправляется уведомление через Telegram.

## Деплой (опционально)

### Docker

Для контейнеризации приложения создайте `Dockerfile` в корне проекта:

```dockerfile
FROM python:3.9-slim
WORKDIR /app
COPY . /app
RUN pip install --upgrade pip
RUN pip install -r requirements.txt
EXPOSE 5000
CMD ["python", "app.py"]
```

### Heroku

Для деплоя на Heroku:
- Создайте файл `Procfile`:
  ```
  web: python app.py
  ```
- Настройте переменные окружения через интерфейс Heroku или командную строку.

## Дополнительная информация

- **API CoinGecko:** Для получения данных о ценах не требуется API-ключ. Ознакомьтесь с [документацией CoinGecko](https://www.coingecko.com/en/api) для дополнительных возможностей.
- **Telegram Bot:** Если уведомления не приходят, проверьте корректность токена и chat_id, а также убедитесь, что бот запущен и имеет доступ к чату/группе.

## Лицензия

Этот проект распространяется под лицензией MIT. Подробнее смотрите файл [LICENSE](LICENSE).

## Контакт

Если у вас есть вопросы или предложения по улучшению, пишите на [your.email@example.com](mailto:your.email@example.com).

---

*Создано для образовательных и демонстрационных целей.*
```

---

Сохраните данный текст в файл `README.md` в корневой папке проекта. README подробно описывает функционал, используемые технологии, установку, запуск и особенности деплоя проекта.
